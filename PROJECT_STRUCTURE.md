# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ 2048

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É **–ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏**.  
–ù–∏–∫–∞–∫–∏—Ö —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–≥—Ä—ã.

## –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
Main (entry point)
  ‚îî‚îÄ‚îÄ Game Scene
       ‚îú‚îÄ‚îÄ GameManager (autoload, singleton)
       ‚îÇ    ‚îî‚îÄ‚îÄ YandexSDK (child node)
       ‚îú‚îÄ‚îÄ Grid (–∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ)
       ‚îÇ    ‚îî‚îÄ‚îÄ Tiles (–ø–ª–∏—Ç–∫–∏, —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
       ‚îî‚îÄ‚îÄ InputHandler (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞)
```

## –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### üìú scripts/game_manager.gd

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–≥—Ä—ã (—Å–∏–Ω–≥–ª—Ç–æ–Ω —á–µ—Ä–µ–∑ autoload).

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—á—ë—Ç–∞
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Å—á—ë—Ç–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ Best Score (localStorage)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex SDK
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã (start, game over, restart)

**–°–∏–≥–Ω–∞–ª—ã:**
- `game_started` ‚Äî –∏–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å
- `game_over_triggered(score: int)` ‚Äî –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `start_new_game()` ‚Äî –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
- `update_score(points: int)` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç
- `trigger_game_over()` ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º—É
- `restart_game()` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É

---

### üìú scripts/yandex_sdk.gd

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yandex Games SDK.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK
- –í—ã–∑–æ–≤ `gameReady()` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
- –ü–æ–∫–∞–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ SDK (–±–µ–∑ –∫—Ä–∞—à–∞)
- Timeout —Ä–µ–∫–ª–∞–º—ã (5 —Å–µ–∫)

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `game_ready()` ‚Äî —Å–æ–æ–±—â–∏—Ç—å Yandex, —á—Ç–æ –∏–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
- `show_fullscreen_ad()` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º—É –ø–æ—Å–ª–µ Game Over

**–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—Å–µ JS-–≤—ã–∑–æ–≤—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- –ü—Ä–∏ –æ—à–∏–±–∫–µ SDK –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `JavaScriptBridge` –¥–ª—è –≤—ã–∑–æ–≤–∞ JS

---

### üìú scripts/grid.gd

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è 4√ó4 –∏ –ø—Ä–∞–≤–∏–ª 2048.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ –ø–ª–∏—Ç–æ–∫ (–¥–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∏—Ç–æ–∫
- –î–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∏—Ç–æ–∫ (up, down, left, right)
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–ª–∏—Ç–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Game Over
- –ü–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–ª–∏—Ç–æ–∫ –ø–æ—Å–ª–µ —Ö–æ–¥–∞

**–°–∏–≥–Ω–∞–ª—ã:**
- `score_updated(points: int)` ‚Äî —Å—á—ë—Ç –æ–±–Ω–æ–≤–ª—ë–Ω
- `game_over` ‚Äî Game Over
- `move_completed` ‚Äî —Ö–æ–¥ –∑–∞–≤–µ—Ä—à—ë–Ω

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `start_new_game()` ‚Äî –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
- `process_move(direction: Vector2i)` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ö–æ–¥
- `_move_up/down/left/right()` ‚Äî –ª–æ–≥–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
- `_is_game_over()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ö–æ–¥–æ–≤
- `_spawn_random_tile()` ‚Äî –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ø–ª–∏—Ç–∫–∏

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `GRID_SIZE = 4` ‚Äî —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è
- `TILE_SIZE = 150` ‚Äî —Ä–∞–∑–º–µ—Ä –ø–ª–∏—Ç–∫–∏ (px)
- `TILE_SPACING = 20` ‚Äî –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –ø–ª–∏—Ç–∫–∞–º–∏
- `SPAWN_PROBABILITY_4 = 0.1` ‚Äî 10% —à–∞–Ω—Å –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–ª–∏—Ç–∫–∏ 4

---

### üìú scripts/tile.gd

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–ª–∏—Ç–∫–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–ª–∏—Ç–∫–∏ (2, 4, 8, ...)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∏—Ç–∫–∏ (—Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç)
- –ê–Ω–∏–º–∞—Ü–∏–∏ (–ø–æ—è–≤–ª–µ–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ, —Å–ª–∏—è–Ω–∏–µ)

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `set_value(new_value: int)` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
- `animate_spawn()` ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è (scale 0 ‚Üí 1)
- `animate_merge()` ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è —Å–ª–∏—è–Ω–∏—è (scale 1 ‚Üí 1.1 ‚Üí 1)
- `move_to(target_position: Vector2)` ‚Äî –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `TILE_COLORS` ‚Äî —Å–ª–æ–≤–∞—Ä—å —Ü–≤–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π:**
- –ü–æ—è–≤–ª–µ–Ω–∏–µ: 0.1 —Å–µ–∫
- –°–ª–∏—è–Ω–∏–µ: 0.1 —Å–µ–∫ (0.05 √ó 2)
- –î–≤–∏–∂–µ–Ω–∏–µ: 0.12 —Å–µ–∫

---

### üìú scripts/input_handler.gd

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ + —Å–≤–∞–π–ø—ã).

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–µ–ª–æ–∫ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ WASD
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–æ–≤ (mouse + touch)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–∞–π–ø–∞

**–°–∏–≥–Ω–∞–ª—ã:**
- `move_input(direction: Vector2i)` ‚Äî –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `MIN_SWIPE_DISTANCE = 50.0` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è —Å–≤–∞–π–ø–∞ (px)

**–õ–æ–≥–∏–∫–∞ —Å–≤–∞–π–ø–∞:**
1. –ù–∞—á–∞–ª–æ: –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
2. –ö–æ–Ω–µ—Ü: –≤—ã—á–∏—Å–ª—è–µ–º –≤–µ–∫—Ç–æ—Ä
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é
4. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ/–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ)

---

### üé¨ scenes/tile/tile.tscn

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ü–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–ª–∏—Ç–∫–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Tile (Node2D)
  ‚îú‚îÄ‚îÄ Background (ColorRect) ‚Äî —Ü–≤–µ—Ç–Ω–æ–π —Ñ–æ–Ω
  ‚îî‚îÄ‚îÄ Label ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∏—Ç–∫–∏
```

**–°–∫—Ä–∏–ø—Ç:** `tile.gd`

---

### üé¨ scenes/game/game.tscn

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Game (Node2D)
  ‚îú‚îÄ‚îÄ Background (ColorRect) ‚Äî —Ñ–æ–Ω —ç–∫—Ä–∞–Ω–∞
  ‚îú‚îÄ‚îÄ UI (CanvasLayer)
  ‚îÇ    ‚îî‚îÄ‚îÄ TopPanel
  ‚îÇ         ‚îú‚îÄ‚îÄ Title ("2048")
  ‚îÇ         ‚îú‚îÄ‚îÄ ScoreLabel / ScoreValue
  ‚îÇ         ‚îú‚îÄ‚îÄ BestLabel / BestValue
  ‚îÇ         ‚îî‚îÄ‚îÄ RestartButton
  ‚îú‚îÄ‚îÄ GridContainer
  ‚îÇ    ‚îú‚îÄ‚îÄ GridBackground (Panel)
  ‚îÇ    ‚îî‚îÄ‚îÄ Grid (Node2D) ‚Äî —Å–µ—Ç–∫–∞ —Å –ø–ª–∏—Ç–∫–∞–º–∏
  ‚îî‚îÄ‚îÄ InputHandler
```

**–°–∫—Ä–∏–ø—Ç:** `game.gd`

**–ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã:**
- `input_handler.move_input` ‚Üí `_on_move_input`
- `grid.score_updated` ‚Üí `_on_score_updated`
- `grid.game_over` ‚Üí `_on_game_over`
- `restart_button.pressed` ‚Üí `_on_restart_pressed`

---

### üé¨ scenes/main/main.tscn

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Entry point –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Main (Node)
  ‚îî‚îÄ‚îÄ Game (–∏–Ω—Å—Ç–∞–Ω—Å game.tscn)
```

–≠—Ç–æ —Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Å—Ü–µ–Ω–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç `game.tscn`.

---

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã

1. Godot –∑–∞–≥—Ä—É–∂–∞–µ—Ç `main.tscn`
2. `GameManager` (autoload) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
3. `GameManager` —Å–æ–∑–¥–∞—ë—Ç `YandexSDK`
4. `YandexSDK` –≤—ã–∑—ã–≤–∞–µ—Ç `gameReady()`
5. `game.tscn` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—É—é –∏–≥—Ä—É
6. `grid.gd` —Å–æ–∑–¥–∞—ë—Ç 2 –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø–ª–∏—Ç–∫–∏

### –•–æ–¥ –∏–≥—Ä–æ–∫–∞

1. –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç —Å—Ç—Ä–µ–ª–∫—É –∏–ª–∏ –¥–µ–ª–∞–µ—Ç —Å–≤–∞–π–ø
2. `InputHandler` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
3. `InputHandler` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª `move_input(direction)`
4. `game.gd` –ø–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `grid.process_move(direction)`
5. `grid.gd` –¥–≤–∏–≥–∞–µ—Ç –ø–ª–∏—Ç–∫–∏:
   - –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –ø–ª–∏—Ç–∫–∏ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
   - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –º–∞—Å—Å–∏–≤ `tiles[][]`
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏
6. `grid.gd` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª `score_updated(points)`
7. `game.gd` –æ–±–Ω–æ–≤–ª—è–µ—Ç UI (Score, Best)
8. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–ª–∏—Ç–∫–∞
9. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è Game Over

### Game Over

1. `grid.gd` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ö–æ–¥—ã
2. –ï—Å–ª–∏ —Ö–æ–¥–æ–≤ –Ω–µ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª `game_over`
3. `game.gd` –ø–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `game_manager.trigger_game_over()`
4. `GameManager` –≤—ã–∑—ã–≤–∞–µ—Ç `yandex_sdk.show_fullscreen_ad()`
5. `YandexSDK` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–ª–∞–º—É:
   - –°—Ç–∞–≤–∏—Ç –∏–≥—Ä—É –Ω–∞ –ø–∞—É–∑—É (`get_tree().paused = true`)
   - –í—ã–∑—ã–≤–∞–µ—Ç JS: `ysdk.adv.showFullscreenAdv()`
   - –ñ–¥—ë—Ç callback –∏–ª–∏ timeout (5 —Å–µ–∫)
   - –°–Ω–∏–º–∞–µ—Ç –ø–∞—É–∑—É
6. `game.gd` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω Game Over
7. –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç Restart ‚Üí –∏–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ

---

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### Best Score

**–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è:**
- **Web:** `localStorage` (–∫–ª—é—á: `best_score`)
- **Desktop:** `user://best_score.dat`

**–ö–æ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Best Score (–µ—Å–ª–∏ —Ç–µ–∫—É—â–∏–π —Å—á—ë—Ç –±–æ–ª—å—à–µ)

**–ö–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:**
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã (`GameManager._ready()`)

---

## –ê–Ω–∏–º–∞—Ü–∏–∏

### –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–ª–∏—Ç–∫–∏ (spawn)

- –≠—Ñ—Ñ–µ–∫—Ç: scale –æ—Ç 0 –¥–æ 1
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 0.1 —Å–µ–∫
- Easing: ease-out + back (–æ—Ç—Å–∫–æ–∫)

### –î–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∏—Ç–∫–∏ (move)

- –≠—Ñ—Ñ–µ–∫—Ç: –ø–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 0.12 —Å–µ–∫
- Easing: ease-out + quad

### –°–ª–∏—è–Ω–∏–µ –ø–ª–∏—Ç–æ–∫ (merge)

- –≠—Ñ—Ñ–µ–∫—Ç: scale 1.0 ‚Üí 1.1 ‚Üí 1.0
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 0.1 —Å–µ–∫ (0.05 √ó 2)
- Easing: ease-out + quad

**–ò—Ç–æ–≥–æ–≤–æ–µ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–π –∑–∞ —Ö–æ–¥: ~0.12‚Äì0.15 —Å–µ–∫**

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Yandex SDK –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

- –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è warning –≤ –∫–æ–Ω—Å–æ–ª—å
- –†–µ–∫–ª–∞–º–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- –ò–≥—Ä–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç

### –û—à–∏–±–∫–∞ –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã

- Timeout 5 —Å–µ–∫—É–Ω–¥
- –ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è warning
- –ò–≥—Ä–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç

### –ü–ª–∏—Ç–∫–∞ –Ω–µ —Å–æ–∑–¥–∞–ª–∞—Å—å

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫
- –ï—Å–ª–∏ –Ω–µ—Ç –ø—É—Å—Ç—ã—Ö ‚Äî –ø–ª–∏—Ç–∫–∞ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è
- Game Over –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –£–∑–∫–∏–µ –º–µ—Å—Ç–∞

- –°–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∏—Ç–æ–∫ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ö–æ–¥–µ
- –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ–π —Å–µ—Ç–∫–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ Game Over

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—É–∂–µ —Å–¥–µ–ª–∞–Ω—ã)

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Array[Array]` –≤–º–µ—Å—Ç–æ Dictionary
- –ê–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Tween (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤ –≤ —Å—Ü–µ–Ω–µ

### –¶–µ–ª–µ–≤–æ–π FPS: ~60

–ù–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å ~30‚Äì40 FPS, –Ω–æ –∏–≥—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∏–≥—Ä–∞–±–µ–ª—å–Ω–æ–π.

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫–∏?

1. –°–æ–∑–¥–∞–π—Ç–µ `AudioStreamPlayer` –≤ `game.tscn`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ-—Ñ–∞–π–ª—ã (`.ogg` –∏–ª–∏ `.wav`)
3. –í `game.gd` –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ —Å–∏–≥–Ω–∞–ª–∞–º:
   - `grid.score_updated` ‚Üí –ø—Ä–æ–∏–≥—Ä–∞—Ç—å –∑–≤—É–∫ —Å–ª–∏—è–Ω–∏—è
   - `grid.game_over` ‚Üí –ø—Ä–æ–∏–≥—Ä–∞—Ç—å –∑–≤—É–∫ Game Over
4. **–í–∞–∂–Ω–æ:** –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∑–≤—É–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ user input (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–≤)

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ª–∏–¥–µ—Ä–±–æ—Ä–¥—ã?

1. –î–æ–±–∞–≤—å—Ç–µ –≤ `yandex_sdk.gd` –º–µ—Ç–æ–¥ `submit_score(score: int)`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `JavaScriptBridge.eval("ysdk.getLeaderboards()...")`
3. –í—ã–∑—ã–≤–∞–π—Ç–µ –ø–æ—Å–ª–µ Game Over
4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ (–Ω–µ –∫—Ä–∞—à—å—Ç–µ –∏–≥—Ä—É)

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å rewarded ads?

1. –î–æ–±–∞–≤—å—Ç–µ –≤ `yandex_sdk.gd` –º–µ—Ç–æ–¥ `show_rewarded_ad()`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ysdk.adv.showRewardedVideo()`
3. –î–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—É **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ** callback `onRewarded`
4. –û–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ `onClose` –±–µ–∑ reward ‚Üí –Ω–µ –¥–∞–≤–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—É

---

## –î–µ–±–∞–≥

### –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤

–í –∫–∞–∂–¥–æ–º —Å–∫—Ä–∏–ø—Ç–µ –µ—Å—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞:

```gdscript
const DEBUG: bool = true  # –ü–æ–º–µ–Ω—è–π—Ç–µ –Ω–∞ false –¥–ª—è production
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –ª–æ–≥–∏

- `[GameManager] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞`
- `[GameManager] –ù–æ–≤–∞—è –∏–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞`
- `[GameManager] Game Over. –°—á—ë—Ç: X`
- `[YandexSDK] SDK –¥–æ—Å—Ç—É–ø–µ–Ω` / `SDK –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`
- `[YandexSDK] gameReady() –≤—ã–∑–≤–∞–Ω`
- `[YandexSDK] –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—É—é —Ä–µ–∫–ª–∞–º—É`

### –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è JS-–æ—à–∏–±–æ–∫ –∏ SDK-–ª–æ–≥–æ–≤.

---

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–Ω—è—Ç–Ω–∞? –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É! üöÄ**
